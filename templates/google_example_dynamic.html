<html>
<head>
    <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['annotationchart']}]}"></script>
    <script type='text/javascript'>
        google.load('visualization', '1', {'packages':['annotationchart']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var query = new google.visualization.Query('http://localhost:5000/graph_query');
            query.send(handleQueryResponse);
        }

        function handleQueryResponse(response) {
            if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
            }

            var chart = new google.visualization.AnnotationChart(document.getElementById('chart_div'));
            google.visualization.events.addListener(chart, 'rangechange', rangechange_handler);

            var options = {
                displayAnnotations: true
            };

            chart.draw(response.getDataTable(), options);
        }

        function rangechange_handler(e) {
            console.log('You changed the range to ', e['start'], ' and ', e['end']);
        }
    </script>
</head>

<body>
<div id='chart_div' style='width: 900px; height: 500px;'></div>
</body>
</html>
<html>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://code.highcharts.com/stock/highstock.js"></script>
    <script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
    <script type='text/javascript'>
        Highcharts.setOptions({
            global: {
                useUTC: true
            }
        });

        $(function () {
            /**
             * Load new data depending on the selected min and max
             */
            function afterSetExtremes(e) {

                var chart = $('#container').highcharts();

                chart.showLoading('Loading data from server...');
                $.getJSON('http://localhost:5000/jquery_data?start=' + Math.round(e.min) +
                '&end=' + Math.round(e.max) + '&callback=?', function (data) {

                    chart.series[0].setData(data);
                    chart.hideLoading();
                });
            }

            // See source code from the JSONP handler at https://github.com/highslide-software/highcharts.com/blob/master/samples/data/from-sql.php
            $.getJSON('http://localhost:5000/jquery_data?start={{ start_millis }}&callback=?', function (data) {

                // Add a null value for the end date
                data = [].concat(data, [[{{ start_millis }}, new Date().getUTCMilliseconds(), null, null, null]]);

                // create the chart
                $('#container').highcharts('StockChart', {
                    chart : {
                        zoomType: 'x'
                    },

                    navigator : {
                        adaptToUpdatedData: false,
                        series : {
                            data : data
                        }
                    },

                    scrollbar: {
                        liveRedraw: false
                    },

                    title: {
                        text: 'AAPL history by the minute from 1998 to 2011'
                    },

                    subtitle: {
                        text: 'Displaying 1.7 million data points in Highcharts Stock by async server loading'
                    },

                    rangeSelector : {
                        buttons: [{
                            type: 'hour',
                            count: 1,
                            text: '1h'
                        }, {
                            type: 'day',
                            count: 1,
                            text: '1d'
                        }, {
                            type: 'month',
                            count: 1,
                            text: '1m'
                        }, {
                            type: 'year',
                            count: 1,
                            text: '1y'
                        }, {
                            type: 'all',
                            text: 'All'
                        }],
                        inputEnabled: false, // it supports only days
                        selected : 1 // all
                    },

                    xAxis : {
                        events : {
                            afterSetExtremes : afterSetExtremes
                        },
                        minRange: 3600 * 1000 // one hour
                    },

                    yAxis: {
                        floor: 0
                    },

                    series : [{
                        data : data,
                        dataGrouping: {
                            enabled: false
                        }
                    }]
                });
            });
        });
    </script>
<div id='container' style='width: 900px; height: 500px;'></div>
</html>